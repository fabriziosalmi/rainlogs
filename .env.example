# RainLogs environment variables
# Copy to .env and fill in the values.
# ⚠️  Never commit .env to version control.

# ── Application ──────────────────────────────────────────────────────────────
RAINLOGS_APP_ENV=development        # development | production
RAINLOGS_APP_PORT=8080

# ── Database (PostgreSQL) ─────────────────────────────────────────────────────
POSTGRES_USER=rainlogs
POSTGRES_PASSWORD=changeme
POSTGRES_DB=rainlogs
RAINLOGS_DATABASE_DSN=postgres://rainlogs:changeme@localhost:5432/rainlogs?sslmode=disable

# ── Redis (asynq queue) ───────────────────────────────────────────────────────
RAINLOGS_REDIS_ADDR=localhost:6379
RAINLOGS_REDIS_PASSWORD=changeme
RAINLOGS_REDIS_DB=0

# ── S3-compatible object storage ──────────────────────────────────────────────
# Development: Garage (local Docker)
RAINLOGS_S3_ENDPOINT=http://localhost:3900
RAINLOGS_S3_REGION=garage
RAINLOGS_S3_BUCKET=rainlogs-logs
RAINLOGS_S3_ACCESS_KEY_ID=
RAINLOGS_S3_SECRET_ACCESS_KEY=
RAINLOGS_S3_FORCE_PATH_STYLE=true
RAINLOGS_S3_STORAGE_CLASS=STANDARD

# Production alternatives:
# Hetzner Object Storage (Frankfurt)
# RAINLOGS_S3_ENDPOINT=https://fsn1.your-objectstorage.com
# RAINLOGS_S3_REGION=eu-central-1
#
# Contabo Object Storage (EU)
# RAINLOGS_S3_ENDPOINT=https://eu2.contabostorage.com
# RAINLOGS_S3_REGION=EU

# ── Encryption (AES-256-GCM for CF API keys at rest) ──────────────────────────
# Generate: openssl rand -hex 32   (must be exactly 64 hex chars = 32 bytes)
RAINLOGS_KMS_KEY=

# ── JWT (internal tokens) ─────────────────────────────────────────────────────
# Generate: openssl rand -hex 32
RAINLOGS_JWT_SECRET=
RAINLOGS_JWT_EXPIRATION=24h

# ── Cloudflare API defaults ───────────────────────────────────────────────────
RAINLOGS_CLOUDFLARE_BASE_URL=https://api.cloudflare.com/client/v4
RAINLOGS_CLOUDFLARE_REQUEST_TIMEOUT=30s
RAINLOGS_CLOUDFLARE_MAX_WINDOW_SIZE=1h

# ── Worker ────────────────────────────────────────────────────────────────────
RAINLOGS_WORKER_CONCURRENCY=10
RAINLOGS_WORKER_SCHEDULER_INTERVAL=1m   # Check for due zones every minute (does not affect pull rate 1h)
# NIS2 requires at minimum 3 months; we default to 13 months for safety.
RAINLOGS_WORKER_LOG_RETENTION_DAYS=395

# ── Garage RPC secret (single-node dev cluster) ───────────────────────────────
GARAGE_RPC_SECRET=0000000000000000000000000000000000000000000000000000000000000000
